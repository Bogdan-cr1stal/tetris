<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tetris Pro</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 20px;
    }
    
    .header {
      text-align: center;
      margin-bottom: 20px;
    }
    
    h1 {
      font-size: 2.8rem;
      background: linear-gradient(to right, #ff6b6b, #4ecdc4);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
      margin-bottom: 10px;
    }
    
    .subtitle {
      font-size: 1rem;
      color: #aaa;
      margin-bottom: 20px;
    }
    
    .game-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 25px;
      max-width: 900px;
      width: 100%;
    }
    
    .game-area {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    canvas {
      border: 3px solid #333;
      border-radius: 5px;
      background-color: #111;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
      touch-action: none;
    }
    
    .controls {
      display: flex;
      gap: 10px;
      margin-top: 20px;
      flex-wrap: wrap;
      justify-content: center;
    }
    
    button {
      padding: 14px 20px;
      font-size: 1.2rem;
      background: linear-gradient(145deg, #4a4a8a, #3a3a6a);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      min-width: 70px;
    }
    
    button:hover {
      background: linear-gradient(145deg, #5a5a9a, #4a4a7a);
      transform: translateY(-2px);
    }
    
    button:active {
      transform: translateY(1px);
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
    
    .info-panel {
      background: rgba(30, 30, 60, 0.8);
      border-radius: 12px;
      padding: 20px;
      min-width: 220px;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    
    .panel-section {
      background: rgba(40, 40, 80, 0.6);
      border-radius: 8px;
      padding: 15px;
    }
    
    .panel-title {
      font-size: 1.2rem;
      color: #4ecdc4;
      margin-bottom: 10px;
      border-bottom: 1px solid #444;
      padding-bottom: 5px;
    }
    
    .score-display {
      font-size: 2.2rem;
      font-weight: bold;
      text-align: center;
      color: #ffd166;
      text-shadow: 0 2px 4px rgba(0,0,0,0.5);
    }
    
    .next-piece {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    .next-canvas {
      width: 100px;
      height: 100px;
      background-color: #111;
      border-radius: 5px;
      border: 2px solid #444;
    }
    
    .history {
      max-height: 150px;
      overflow-y: auto;
    }
    
    .history-item {
      display: flex;
      justify-content: space-between;
      padding: 5px 0;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    
    .history-item:last-child {
      border-bottom: none;
    }
    
    .history-score {
      color: #ffd166;
      font-weight: bold;
    }
    
    .game-over {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.85);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border-radius: 5px;
      z-index: 10;
      display: none;
    }
    
    .game-over h2 {
      font-size: 3rem;
      color: #ff6b6b;
      margin-bottom: 20px;
    }
    
    .game-over p {
      font-size: 1.5rem;
      margin-bottom: 30px;
      color: #ffd166;
    }
    
    .mobile-instructions {
      display: none;
      margin-top: 15px;
      color: #aaa;
      font-size: 0.9rem;
      text-align: center;
      padding: 10px;
      background: rgba(0,0,0,0.2);
      border-radius: 8px;
    }
    
    @media (max-width: 768px) {
      .game-container {
        flex-direction: column;
        align-items: center;
      }
      
      .info-panel {
        width: 100%;
        max-width: 300px;
      }
      
      .controls {
        gap: 8px;
      }
      
      button {
        padding: 12px 16px;
        font-size: 1.1rem;
        min-width: 60px;
      }
      
      .mobile-instructions {
        display: block;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>TETRIS PRO</h1>
    <div class="subtitle">–ö–ª–∞—Å–∏—á–Ω–∞ –≥—Ä–∞ –∑ —Å—É—á–∞—Å–Ω–∏–º –¥–∏–∑–∞–π–Ω–æ–º</div>
  </div>
  
  <div class="game-container">
    <div class="game-area">
      <canvas id="gameCanvas" width="300" height="500"></canvas>
      <div class="mobile-instructions">
        –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Å—Ç—Ä—ñ–ª–∫–∏ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—é –∞–±–æ –∫–Ω–æ–ø–∫–∏ –Ω–∏–∂—á–µ
      </div>
      
      <div class="controls">
        <button id="left">‚¨ÖÔ∏è –í–ª—ñ–≤–æ</button>
        <button id="rot">üîÑ –ü–æ–≤–µ—Ä–Ω—É—Ç–∏</button>
        <button id="right">–í–ø—Ä–∞–≤–æ ‚û°Ô∏è</button>
        <button id="down">–®–≤–∏–¥—à–µ ‚¨áÔ∏è</button>
        <button id="pause">‚è∏Ô∏è –ü–∞—É–∑–∞</button>
      </div>
    </div>
    
    <div class="info-panel">
      <div class="panel-section">
        <div class="panel-title">–†–ê–•–£–ù–û–ö</div>
        <div class="score-display" id="score">0</div>
      </div>
      
      <div class="panel-section">
        <div class="panel-title">–ù–ê–°–¢–£–ü–ù–ê –§–Ü–ì–£–†–ê</div>
        <div class="next-piece">
          <canvas id="nextCanvas" width="100" height="100"></canvas>
        </div>
      </div>
      
      <div class="panel-section">
        <div class="panel-title">–†–ï–ö–û–†–î–ò</div>
        <div class="history" id="history">
          <!-- History will be populated by JavaScript -->
        </div>
      </div>
      
      <div class="panel-section">
        <div class="panel-title">–ö–û–ú–ê–ù–î–ò</div>
        <div style="font-size: 0.9rem; line-height: 1.4;">
          <p>‚Üê ‚Üí ‚Äî –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è</p>
          <p>‚Üë ‚Äî –ø–æ–≤–æ—Ä–æ—Ç</p>
          <p>‚Üì ‚Äî –ø—Ä–∏—à–≤–∏–¥—à–∏—Ç–∏</p>
          <p>P ‚Äî –ø–∞—É–∑–∞</p>
          <p>R ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫</p>
        </div>
      </div>
    </div>
  </div>
  
  <div class="game-over" id="gameOver">
    <h2>–ì–†–ê –ó–ê–ö–Ü–ù–ß–ï–ù–ê!</h2>
    <p id="finalScore">–í–∞—à —Ä–∞—Ö—É–Ω–æ–∫: 0</p>
    <button id="restart">üîÑ –ó–ê–ù–û–í–û</button>
  </div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const nextCanvas = document.getElementById('nextCanvas');
const nextCtx = nextCanvas.getContext('2d');
const scoreElement = document.getElementById('score');
const gameOverScreen = document.getElementById('gameOver');
const finalScoreElement = document.getElementById('finalScore');
const historyElement = document.getElementById('history');

const COLS = 10, ROWS = 20, SIZE = 25;
const board = Array.from({length: ROWS}, () => Array(COLS).fill(0));

// –ö–æ–ª—å–æ—Ä–∏ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ñ—ñ–≥—É—Ä
const COLORS = [
  '#FF5252', // –ß–µ—Ä–≤–æ–Ω–∏–π - I
  '#FFEB3B', // –ñ–æ–≤—Ç–∏–π - O
  '#9C27B0', // –§—ñ–æ–ª–µ—Ç–æ–≤–∏–π - T
  '#FF9800', // –ü–æ–º–∞—Ä–∞–Ω—á–µ–≤–∏–π - L
  '#2196F3', // –°–∏–Ω—ñ–π - J
  '#4CAF50', // –ó–µ–ª–µ–Ω–∏–π - S
  '#00BCD4', // –ë—ñ—Ä—é–∑–æ–≤–∏–π - Z
];

const pieces = [
  // I
  [[1,1,1,1]],
  // O
  [[1,1],[1,1]],
  // T
  [[0,1,0],[1,1,1]],
  // L
  [[1,0],[1,0],[1,1]],
  // J
  [[0,1],[0,1],[1,1]],
  // S
  [[0,1,1],[1,1,0]],
  // Z
  [[1,1,0],[0,1,1]],
];

let score = 0;
let level = 1;
let linesCleared = 0;
let gameRunning = true;
let gamePaused = false;
let nextPieceIndex = Math.floor(Math.random() * pieces.length);
let history = JSON.parse(localStorage.getItem('tetrisHistory')) || [];

// –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó
function loadHistory() {
  historyElement.innerHTML = '';
  // –°–æ—Ä—Ç—É—î–º–æ —ñ—Å—Ç–æ—Ä—ñ—é –∑–∞ —Å–ø–∞–¥–∞–Ω–Ω—è–º —Ä–∞—Ö—É–Ω–∫—É
  history.sort((a, b) => b.score - a.score);
  
  // –ü–æ–∫–∞–∑—É—î–º–æ —Ç—ñ–ª—å–∫–∏ —Ç–æ–ø-5 —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
  const topScores = history.slice(0, 5);
  
  topScores.forEach((item, index) => {
    const historyItem = document.createElement('div');
    historyItem.className = 'history-item';
    historyItem.innerHTML = `
      <span>#${index + 1}: ${new Date(item.date).toLocaleDateString()}</span>
      <span class="history-score">${item.score}</span>
    `;
    historyElement.appendChild(historyItem);
  });
  
  // –Ø–∫—â–æ —ñ—Å—Ç–æ—Ä—ñ—è –ø–æ—Ä–æ–∂–Ω—è, –ø–æ–∫–∞–∑—É—î–º–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
  if (history.length === 0) {
    const emptyMsg = document.createElement('div');
    emptyMsg.className = 'history-item';
    emptyMsg.textContent = "–ù–µ–º–∞—î —ñ—Å—Ç–æ—Ä—ñ—ó —ñ–≥–æ—Ä";
    emptyMsg.style.color = "#888";
    historyElement.appendChild(emptyMsg);
  }
}

// –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –≤ —ñ—Å—Ç–æ—Ä—ñ—é
function saveToHistory() {
  history.push({
    score: score,
    date: new Date().toISOString(),
    level: level
  });
  
  // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ —Ç—ñ–ª—å–∫–∏ 10 –æ—Å—Ç–∞–Ω–Ω—ñ—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
  if (history.length > 10) {
    history = history.slice(-10);
  }
  
  localStorage.setItem('tetrisHistory', JSON.stringify(history));
  loadHistory();
}

// –ü–æ—á–∞—Ç–∫–æ–≤–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó
loadHistory();

let p = spawn();

function spawn(){
  const currentPieceIndex = nextPieceIndex;
  const shape = JSON.parse(JSON.stringify(pieces[currentPieceIndex]));
  nextPieceIndex = Math.floor(Math.random() * pieces.length);
  return { 
    shape, 
    x: Math.floor(COLS/2) - Math.floor(shape[0].length/2), 
    y: 0,
    color: COLORS[currentPieceIndex]
  };
}

function drawNextPiece() {
  nextCtx.clearRect(0, 0, nextCanvas.width, nextCanvas.height);
  
  const shape = pieces[nextPieceIndex];
  const color = COLORS[nextPieceIndex];
  const cellSize = 20;
  const offsetX = (nextCanvas.width - shape[0].length * cellSize) / 2;
  const offsetY = (nextCanvas.height - shape.length * cellSize) / 2;
  
  for(let r = 0; r < shape.length; r++) {
    for(let c = 0; c < shape[r].length; c++) {
      if(shape[r][c]) {
        nextCtx.fillStyle = color;
        nextCtx.fillRect(
          offsetX + c * cellSize, 
          offsetY + r * cellSize, 
          cellSize - 1, 
          cellSize - 1
        );
        
        // –î–æ–¥–∞—î–º–æ —Ç—Ä–æ—Ö–∏ —Å—Ç–∏–ª—é –¥–ª—è —Ñ—ñ–≥—É—Ä–∏
        nextCtx.fillStyle = 'rgba(255, 255, 255, 0.3)';
        nextCtx.fillRect(
          offsetX + c * cellSize + 2, 
          offsetY + r * cellSize + 2, 
          cellSize - 5, 
          cellSize - 5
        );
      }
    }
  }
}

function rotate(mat){
  const h = mat.length, w = mat[0].length;
  const res = Array.from({length:w}, ()=>Array(h).fill(0));
  for(let r=0;r<h;r++) for(let c=0;c<w;c++) res[c][h-1-r]=mat[r][c];
  return res;
}

function collide(nx, ny, shape=p.shape){
  for(let r=0;r<shape.length;r++){
    for(let c=0;c<shape[r].length;c++){
      if(!shape[r][c]) continue;
      const x = nx + c, y = ny + r;
      if(x<0 || x>=COLS || y<0 || y>=ROWS) return true;
      if(board[y][x]) return true;
    }
  }
  return false;
}

function merge(){
  for(let r=0;r<p.shape.length;r++){
    for(let c=0;c<p.shape[r].length;c++){
      if(p.shape[r][c]){
        board[p.y+r][p.x+c] = p.color;
      }
    }
  }
}

function clearLines(){
  let lines = 0;
  for(let r=ROWS-1;r>=0;r--){
    if(board[r].every(v=>v!==0)){
      board.splice(r,1);
      board.unshift(Array(COLS).fill(0));
      lines++;
      r++; // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —Ü–µ–π —Ä—è–¥–æ–∫ –∑–Ω–æ–≤—É, –æ—Å–∫—ñ–ª—å–∫–∏ –∑—Å—É–Ω—É–ª–∏ –≤–Ω–∏–∑
    }
  }
  
  if(lines > 0) {
    // –û–Ω–æ–≤–ª—é—î–º–æ —Ä–∞—Ö—É–Ω–æ–∫
    const linePoints = [0, 100, 300, 500, 800]; // –ë–∞–ª–∏ –∑–∞ 0, 1, 2, 3, 4 –ª—ñ–Ω—ñ–π
    score += linePoints[lines] * level;
    linesCleared += lines;
    
    // –ü—ñ–¥–≤–∏—â—É—î–º–æ —Ä—ñ–≤–µ–Ω—å –∫–æ–∂–Ω—ñ 10 –ª—ñ–Ω—ñ–π
    level = Math.floor(linesCleared / 10) + 1;
    
    updateScore();
  }
}

function draw(){
  // –û—á–∏—â—É—î–º–æ canvas
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  
  // –ú–∞–ª—é—î–º–æ —Å—ñ—Ç–∫—É
  ctx.strokeStyle = 'rgba(255, 255, 255, 0.05)';
  ctx.lineWidth = 1;
  
  // –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ñ –ª—ñ–Ω—ñ—ó
  for(let c = 0; c <= COLS; c++) {
    ctx.beginPath();
    ctx.moveTo(c * SIZE, 0);
    ctx.lineTo(c * SIZE, ROWS * SIZE);
    ctx.stroke();
  }
  
  // –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ñ –ª—ñ–Ω—ñ—ó
  for(let r = 0; r <= ROWS; r++) {
    ctx.beginPath();
    ctx.moveTo(0, r * SIZE);
    ctx.lineTo(COLS * SIZE, r * SIZE);
    ctx.stroke();
  }
  
  // –ú–∞–ª—é—î–º–æ —Ñ—ñ–∫—Å–æ–≤–∞–Ω—ñ –±–ª–æ–∫–∏ –Ω–∞ –ø–æ–ª—ñ
  for(let r=0;r<ROWS;r++){
    for(let c=0;c<COLS;c++){
      if(board[r][c]){
        ctx.fillStyle = board[r][c];
        ctx.fillRect(c*SIZE, r*SIZE, SIZE-1, SIZE-1);
        
        // –î–æ–¥–∞—î–º–æ 3D-–µ—Ñ–µ–∫—Ç
        ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
        ctx.fillRect(c*SIZE + 2, r*SIZE + 2, SIZE - 5, SIZE - 5);
        
        // –†–∞–º–∫–∞
        ctx.strokeStyle = 'rgba(0, 0, 0, 0.3)';
        ctx.lineWidth = 1;
        ctx.strokeRect(c*SIZE, r*SIZE, SIZE-1, SIZE-1);
      }
    }
  }
  
  // –ú–∞–ª—é—î–º–æ –ø–æ—Ç–æ—á–Ω—É —Ñ—ñ–≥—É—Ä—É
  for(let r=0;r<p.shape.length;r++){
    for(let c=0;c<p.shape[r].length;c++){
      if(p.shape[r][c]){
        ctx.fillStyle = p.color;
        ctx.fillRect((p.x+c)*SIZE, (p.y+r)*SIZE, SIZE-1, SIZE-1);
        
        // –î–æ–¥–∞—î–º–æ 3D-–µ—Ñ–µ–∫—Ç
        ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
        ctx.fillRect((p.x+c)*SIZE + 2, (p.y+r)*SIZE + 2, SIZE - 5, SIZE - 5);
        
        // –†–∞–º–∫–∞
        ctx.strokeStyle = 'rgba(0, 0, 0, 0.3)';
        ctx.lineWidth = 1;
        ctx.strokeRect((p.x+c)*SIZE, (p.y+r)*SIZE, SIZE-1, SIZE-1);
      }
    }
  }
  
  // –ú–∞–ª—é—î–º–æ –Ω–∞—Å—Ç—É–ø–Ω—É —Ñ—ñ–≥—É—Ä—É
  drawNextPiece();
}

function updateScore() {
  scoreElement.textContent = score;
}

function tick(){
  if (!gameRunning || gamePaused) return;
  
  if(!collide(p.x, p.y+1)){
    p.y++;
  } else {
    merge();
    clearLines();
    p = spawn();
    if(collide(p.x, p.y)) {
      gameOver();
    }
  }
  draw();
}

// –®–≤–∏–¥–∫—ñ—Å—Ç—å –ø–∞–¥—ñ–Ω–Ω—è –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —Ä—ñ–≤–Ω—è
function getGameSpeed() {
  // –®–≤–∏–¥–∫—ñ—Å—Ç—å –∑–º–µ–Ω—à—É—î—Ç—å—Å—è –∑ –∫–æ–∂–Ω–∏–º —Ä—ñ–≤–Ω–µ–º
  return Math.max(100, 500 - (level - 1) * 50);
}

// –ó–∞–ø—É—Å–∫–∞—î–º–æ –≥—Ä—É –∑—ñ –∑–º—ñ–Ω–Ω–æ—é —à–≤–∏–¥–∫—ñ—Å—Ç—é
let gameInterval = setInterval(tick, getGameSpeed());

// –û–Ω–æ–≤–ª—é—î–º–æ —ñ–Ω—Ç–µ—Ä–≤–∞–ª, –∫–æ–ª–∏ –∑–º—ñ–Ω—é—î—Ç—å—Å—è —Ä—ñ–≤–µ–Ω—å
function updateGameSpeed() {
  clearInterval(gameInterval);
  gameInterval = setInterval(tick, getGameSpeed());
}

function gameOver() {
  gameRunning = false;
  clearInterval(gameInterval);
  
  finalScoreElement.textContent = `–í–∞—à —Ä–∞—Ö—É–Ω–æ–∫: ${score}`;
  gameOverScreen.style.display = 'flex';
  
  saveToHistory();
}

function restartGame() {
  // –û—á–∏—â–∞—î–º–æ –ø–æ–ª–µ
  for(let r=0;r<ROWS;r++) board[r].fill(0);
  
  // –°–∫–∏–¥–∞—î–º–æ –∑–º—ñ–Ω–Ω—ñ
  score = 0;
  level = 1;
  linesCleared = 0;
  gameRunning = true;
  
  // –û–Ω–æ–≤–ª—é—î–º–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ä–∞—Ö—É–Ω–∫—É
  updateScore();
  
  // –°—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤—É —Ñ—ñ–≥—É—Ä—É
  nextPieceIndex = Math.floor(Math.random() * pieces.length);
  p = spawn();
  
  // –ü—Ä–∏—Ö–æ–≤—É—î–º–æ –µ–∫—Ä–∞–Ω –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≥—Ä–∏
  gameOverScreen.style.display = 'none';
  
  // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—î–º–æ —ñ–Ω—Ç–µ—Ä–≤–∞–ª
  clearInterval(gameInterval);
  gameInterval = setInterval(tick, getGameSpeed());
  
  // –ú–∞–ª—é—î–º–æ –ø–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞–Ω
  draw();
}

function move(dx, dy){
  if (!gameRunning || gamePaused) return;
  
  const nx = p.x+dx, ny = p.y+dy;
  if(!collide(nx, ny)){ 
    p.x=nx; 
    p.y=ny; 
    draw(); 
  }
}

function doRotate(){
  if (!gameRunning || gamePaused) return;
  
  const rs = rotate(p.shape);
  if(!collide(p.x, p.y, rs)){ 
    p.shape=rs; 
    draw(); 
  }
}

function togglePause() {
  gamePaused = !gamePaused;
  document.getElementById('pause').textContent = gamePaused ? '‚ñ∂Ô∏è –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏' : '‚è∏Ô∏è –ü–∞—É–∑–∞';
  
  if (gamePaused) {
    clearInterval(gameInterval);
  } else {
    gameInterval = setInterval(tick, getGameSpeed());
  }
}

// –û–±—Ä–æ–±–∫–∞ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏
document.addEventListener('keydown', e=>{
  if(e.key==='ArrowLeft') move(-1,0);
  if(e.key==='ArrowRight') move(1,0);
  if(e.key==='ArrowDown') move(0,1);
  if(e.key==='ArrowUp') doRotate();
  if(e.key === 'p' || e.key === 'P' || e.key === ' ') togglePause();
  if(e.key === 'r' || e.key === 'R') restartGame();
});

// –ü—Ä–∏–≤'—è–∑–∫–∞ –∫–Ω–æ–ø–æ–∫
left.onclick = ()=>move(-1,0);
right.onclick = ()=>move(1,0);
down.onclick = ()=>move(0,1);
rot.onclick = ()=>doRotate();
pause.onclick = ()=>togglePause();
document.getElementById('restart').onclick = restartGame;

// –ü–æ—á–∞—Ç–∫–æ–≤–µ –º–∞–ª—é–≤–∞–Ω–Ω—è
draw();
</script>
</body>
</html>
